PKG_CXXFLAGS = @DEFS@
SUBDIR = macro
SUBLIB = lib$(SUBDIR).a
PKG_LIBS = $(SUBDIR)/$(SUBLIB)

## For the final version of the package, we have to clean the sublib here, 
## to clean up between architectures:
## INSTALL only cleans src/*.o src/*$(SHLIB_EXT) for each arch
#all : subclean sublib $(SHLIB)

# While developping on the same architecture is not not necessary  to clean sublib
all : sublib $(SHLIB)

$(SHLIB) : $(OBJECTS) $(SUBDIR)/$(SUBLIB)

# TODO: handle dependencies

subclean:
	@(cd $(SUBDIR) && $(MAKE) $(SUBLIB) clean)


$(SHLIB) : $(OBJECTS) $(SUBDIR)/$(SUBLIB)

# TODO: handle dependencies

sublib:
	@(cd $(SUBDIR) && $(MAKE) $(SUBLIB) AR="$(AR)")
